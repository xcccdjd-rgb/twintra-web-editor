<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Editor Mockup ‚Äî Full Features</title>
<style>
:root{
  --bg:#0b0b0f; --panel:#0f1114; --muted:#aab0b6; --accent:#6c5ce7; --accent2:#00d4b4;
  --card:#121316; --glass: rgba(255,255,255,0.02);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#07070a,#0f0f12);color:#e8e8ee}
.wrap{max-width:980px;margin:14px auto;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 60px rgba(0,0,0,.6);background:linear-gradient(180deg,rgba(255,255,255,.01),transparent)}
/* Canvas */
.canvas-area{height:62vh;min-height:360px;background:linear-gradient(180deg,#08080a,#0b0c10);display:flex;align-items:center;justify-content:center;position:relative;padding:18px}
.canvas-frame{width:100%;height:100%;max-width:920px;max-height:100%;background:#000;border-radius:12px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
#mediaPreview{width:100%;height:100%;object-fit:contain;display:block;background:#000}
#mediaVideo{width:100%;height:100%;object-fit:contain;display:none;background:#000}
.upload-overlay{position:absolute;left:16px;top:16px;background:rgba(0,0,0,0.5);padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
.hint-bottom{position:absolute;left:16px;bottom:16px;color:var(--muted);font-size:13px}
/* Toolbar */
.toolbar{display:flex;align-items:center;gap:8px;padding:10px;background:linear-gradient(180deg,var(--panel),#0a0a0d);border-top:1px solid rgba(255,255,255,0.03);overflow:hidden}
.tools{display:flex;gap:10px;overflow-x:auto;padding:6px 10px;scrollbar-width:none}
.tools::-webkit-scrollbar{display:none}
.tool{flex:0 0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px 10px;border-radius:10px;min-width:56px;background:var(--glass);border:1px solid rgba(255,255,255,0.02);cursor:pointer;color:var(--muted)}
.tool.active{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#040414;box-shadow:0 6px 20px rgba(108,92,231,.18)}
.tool .ico{font-size:20px;margin-bottom:6px}
.tool .label{font-size:12px;white-space:nowrap}
/* Submenu panel */
.panel{position:fixed;left:0;right:0;bottom:-420px;background:#0f1114;padding:16px;border-top-left-radius:14px;border-top-right-radius:14px;box-shadow:0 -18px 60px rgba(0,0,0,.6);transition:bottom .28s ease;max-height:48vh;overflow:auto}
.panel.open{bottom:0}
.panel .head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.panel h3{margin:0;font-size:16px}
.panel .options{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.pill{padding:8px 12px;background:#121316;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
.row{display:flex;gap:10px;align-items:center}
.btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;background:#222;color:#fff}
.btn.positive{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#040414}
.small{font-size:13px;color:var(--muted)}
/* Crop modal */
#cropPanel{max-width:400px;margin:auto;top:50%;transform:translateY(-50%);display:none;position:absolute;left:0;right:0;z-index:50;background:#121316;padding:16px;border-radius:12px;}
#cropPanel h3{margin:0 0 10px 0;}
#cropPanel .options{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0;}
@media (max-width:720px){ .wrap{margin:6px} .tool{min-width:48px;padding:6px} .panel{padding:12px} }
</style>
</head>
<body>
<div class="wrap" id="app">

  <!-- Canvas area -->
  <div class="canvas-area">
    <div class="canvas-frame">
      <img id="mediaPreview" alt="Preview" src="" style="display:none">
      <video id="mediaVideo" controls style="display:none;background:#000"></video>
      <label for="fileInput" class="upload-overlay">üìÅ Upload</label>
      <input id="fileInput" type="file" accept="image/*,video/*" style="display:none">
      <div class="hint-bottom">Upload media ‚Üí preview akan menyesuaikan ukuran canvas</div>
    </div>
  </div>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="tools" id="tools">
      <div class="tool" data-feature="Crop"><div class="ico">üìê</div><div class="label">Crop</div></div>
      <div class="tool" data-feature="Rasio"><div class="ico">üî≤</div><div class="label">Rasio</div></div>
      <div class="tool" data-feature="Trim"><div class="ico">‚úÇÔ∏è</div><div class="label">Trim</div></div>
      <div class="tool" data-feature="Speed"><div class="ico">‚è©</div><div class="label">Speed</div></div>
      <div class="tool" data-feature="Volume"><div class="ico">üîä</div><div class="label">Volume</div></div>
      <div class="tool" data-feature="Export"><div class="ico">‚¨áÔ∏è</div><div class="label">Export</div></div>
    </div>
  </div>

</div>

<!-- Crop Modal -->
<div id="cropPanel">
  <h3>Crop Media</h3>
  <div><strong>Presets:</strong>
    <div class="options">
      <button data-ratio="1/1">Square</button>
      <button data-ratio="9/16">Story</button>
      <button data-ratio="4/5">Post</button>
      <button data-ratio="16/9">Cover</button>
      <button data-ratio="2/1">Header</button>
      <button data-ratio="9/16">TikTok</button>
      <button data-ratio="4/3">eBay</button>
    </div>
  </div>
  <div style="margin-top:10px;">
    <strong>Custom Crop:</strong><br>
    Width <input id="customWidth" type="number" value="1234" style="width:60px;">
    Height <input id="customHeight" type="number" value="1234" style="width:60px;">
  </div>
  <div style="display:flex;justify-content:space-between;margin-top:12px;">
    <button id="customCancel">Cancel</button>
    <button id="customOk">Ok</button>
  </div>
</div>

<script>
// Media upload
const fileInput = document.getElementById('fileInput');
const mediaImg = document.getElementById('mediaPreview');
const mediaVideo = document.getElementById('mediaVideo');
let mediaElem = null;
let originalMedia = {width:0,height:0};

fileInput.addEventListener('change', e=>{
  const f = e.target.files[0];
  if(!f) return;
  const url = URL.createObjectURL(f);
  mediaImg.style.display='none'; mediaVideo.style.display='none';
  if(f.type.startsWith('video')){ mediaVideo.src=url; mediaVideo.style.display='block'; mediaVideo.play().catch(()=>{}); mediaElem=mediaVideo;}
  else {mediaImg.src=url; mediaImg.style.display='block'; mediaElem=mediaImg;}
  setTimeout(()=>setOriginalMedia(mediaElem.offsetWidth,mediaElem.offsetHeight),50);
});

function setOriginalMedia(w,h){ originalMedia={width:w,height:h}; }

// Crop modal
const cropPanel = document.getElementById('cropPanel');
const presetButtons = cropPanel.querySelectorAll('[data-ratio]');
const customCancel = document.getElementById('customCancel');
const customOk = document.getElementById('customOk');
const customWidth = document.getElementById('customWidth');
const customHeight = document.getElementById('customHeight');

function openCropPanel(){
  if(!mediaElem) return;
  cropPanel.style.display='block';
  setOriginalMedia(mediaElem.offsetWidth,mediaElem.offsetHeight);
  closePanelImmediate();
}

presetButtons.forEach(btn=>{
  btn.onclick = ()=>{
    const [w,h]=btn.dataset.ratio.split('/').map(Number);
    applyCropRatio(w,h);
    cropPanel.style.display='none';
  };
});

customCancel.onclick = ()=>{
  cropPanel.style.display='none';
  restoreMedia();
};

customOk.onclick = ()=>{
  const w=parseFloat(customWidth.value);
  const h=parseFloat(customHeight.value);
  if(w>0 && h>0) applyCropRatio(w,h);
  cropPanel.style.display='none';
};

function applyCropRatio(rw,rh){
  if(!mediaElem) return;
  const frame = mediaElem.parentElement;
  const maxW = frame.clientWidth;
  const maxH = frame.clientHeight;
  const targetRatio = rw/rh;
  const mediaRatio = mediaElem.naturalWidth / mediaElem.naturalHeight;
  let newW,newH;
  if(mediaRatio > targetRatio){ newH=maxH; newW=maxH*targetRatio;}
  else {newW=maxW; newH=maxW/targetRatio;}
  mediaElem.style.width=newW+'px';
  mediaElem.style.height=newH+'px';
  mediaElem.style.objectFit='cover';
}

function restoreMedia(){
  if(!mediaElem) return;
  mediaElem.style.width=originalMedia.width+'px';
  mediaElem.style.height=originalMedia.height+'px';
  mediaElem.style.objectFit='contain';
}

// Toolbar hook
document.querySelector('[data-feature="Crop"]').onclick=openCropPanel;

// Utility
function closePanelImmediate(){ document.querySelectorAll('.tool').forEach(t=>t.classList.remove('active')); }
</script>

</body>
</html>
