<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Editor Mockup â€” Full Features</title>
<style>
  :root{
    --bg:#0b0b0f; --panel:#0f1114; --muted:#aab0b6; --accent:#6c5ce7; --accent2:#00d4b4;
    --card:#121316; --glass: rgba(255,255,255,0.02);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#07070a,#0f0f12);color:#e8e8ee}
  .wrap{max-width:980px;margin:14px auto;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 60px rgba(0,0,0,.6);background:linear-gradient(180deg,rgba(255,255,255,.01),transparent)}
  /* Canvas */
  .canvas-area{height:62vh;min-height:360px;background:linear-gradient(180deg,#08080a,#0b0c10);display:flex;align-items:center;justify-content:center;position:relative;padding:18px}
  .canvas-frame{width:100%;height:100%;max-width:920px;max-height:100%;background:#000;border-radius:12px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
  #mediaPreview{width:100%;height:100%;object-fit:contain;display:block;background:#000}
  .upload-overlay{position:absolute;left:16px;top:16px;background:rgba(0,0,0,0.5);padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
  .hint-bottom{position:absolute;left:16px;bottom:16px;color:var(--muted);font-size:13px}
  /* Toolbar */
  .toolbar{display:flex;align-items:center;gap:8px;padding:10px;background:linear-gradient(180deg,var(--panel),#0a0a0d);border-top:1px solid rgba(255,255,255,0.03);overflow:hidden}
  .tools{display:flex;gap:10px;overflow-x:auto;padding:6px 10px;scrollbar-width:none}
  .tools::-webkit-scrollbar{display:none}
  .tool{flex:0 0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px 10px;border-radius:10px;min-width:56px;background:var(--glass);border:1px solid rgba(255,255,255,0.02);cursor:pointer;color:var(--muted)}
  .tool.active{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#040414;box-shadow:0 6px 20px rgba(108,92,231,.18)}
  .tool .ico{font-size:20px;margin-bottom:6px}
  .tool .label{font-size:12px;white-space:nowrap}
  /* Submenu panel */
  .panel{position:fixed;left:0;right:0;bottom:-420px;background:#0f1114;padding:16px;border-top-left-radius:14px;border-top-right-radius:14px;box-shadow:0 -18px 60px rgba(0,0,0,.6);transition:bottom .28s ease;max-height:48vh;overflow:auto}
  .panel.open{bottom:0}
  .panel .head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
  .panel h3{margin:0;font-size:16px}
  .panel .options{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
  .pill{padding:8px 12px;background:#121316;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
  .row{display:flex;gap:10px;align-items:center}
  .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;background:#222;color:#fff}
  .btn.positive{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#040414}
  .small{font-size:13px;color:var(--muted)}
  /* responsive */
  @media (max-width:720px){ .wrap{margin:6px} .tool{min-width:48px;padding:6px} .panel{padding:12px} }
</style>
</head>
<body>
  <div class="wrap" id="app">

    <!-- Canvas area -->
    <div class="canvas-area">
      <div class="canvas-frame">
        <!-- media element inserted here -->
        <img id="mediaPreview" alt="Preview" src="" style="display:none">
        <video id="mediaVideo" controls style="display:none;background:#000"></video>

        <label for="fileInput" class="upload-overlay">ğŸ“ Upload</label>
        <input id="fileInput" type="file" accept="image/*,video/*" style="display:none">
        <div class="hint-bottom">Upload media â†’ preview akan menyesuaikan ukuran canvas</div>
      </div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
      <div class="tools" id="tools">
        <!-- 22+ icons -->
        <div class="tool" data-feature="Crop"><div class="ico">ğŸ“</div><div class="label">Crop</div></div>
        <div class="tool" data-feature="Rasio"><div class="ico">ğŸ”²</div><div class="label">Rasio</div></div>
        <div class="tool" data-feature="Trim"><div class="ico">âœ‚ï¸</div><div class="label">Trim</div></div>
        <div class="tool" data-feature="Split"><div class="ico">ğŸ”ª</div><div class="label">Split</div></div>
        <div class="tool" data-feature="Speed"><div class="ico">â©</div><div class="label">Speed</div></div>
        <div class="tool" data-feature="Volume"><div class="ico">ğŸ”Š</div><div class="label">Volume</div></div>
        <div class="tool" data-feature="Music"><div class="ico">ğŸµ</div><div class="label">Music</div></div>
        <div class="tool" data-feature="Record"><div class="ico">ğŸ¤</div><div class="label">Record</div></div>
        <div class="tool" data-feature="Filters"><div class="ico">ğŸ¨</div><div class="label">Filter</div></div>
        <div class="tool" data-feature="Effect"><div class="ico">âœ¨</div><div class="label">Effect</div></div>
        <div class="tool" data-feature="Adjust"><div class="ico">âš™ï¸</div><div class="label">Adjust</div></div>
        <div class="tool" data-feature="Text"><div class="ico">ğŸ…°ï¸</div><div class="label">Text</div></div>
        <div class="tool" data-feature="Sticker"><div class="ico">â­</div><div class="label">Sticker</div></div>
        <div class="tool" data-feature="Overlay"><div class="ico">ğŸ–¼ï¸</div><div class="label">Overlay</div></div>
        <div class="tool" data-feature="Replace"><div class="ico">ğŸ”</div><div class="label">Replace</div></div>
        <div class="tool" data-feature="Duplicate"><div class="ico">ğŸ“„</div><div class="label">Duplicate</div></div>
        <div class="tool" data-feature="Background"><div class="ico">ğŸŒ†</div><div class="label">Background</div></div>
        <div class="tool" data-feature="RemoveBG"><div class="ico">ğŸ§½</div><div class="label">RemoveBG</div></div>
        <div class="tool" data-feature="Rotate"><div class="ico">ğŸ”ƒ</div><div class="label">Rotate</div></div>
        <div class="tool" data-feature="Flip"><div class="ico">â†”ï¸</div><div class="label">Flip</div></div>
        <div class="tool" data-feature="Frame"><div class="ico">ğŸ–¼ï¸</div><div class="label">Frame</div></div>
        <div class="tool" data-feature="Export"><div class="ico">â¬‡ï¸</div><div class="label">Export</div></div>
      </div>
    </div>

  </div>

  <!-- Submenu panel -->
  <div id="panel" class="panel" aria-hidden="true">
    <div class="head">
      <h3 id="panelTitle">Feature</h3>
      <div class="small" id="panelInfo"> </div>
    </div>

    <div id="panelBody" class="panel-body">
      <!-- dynamic content -->
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px">
      <button class="btn" id="btnCancel">Batal</button>
      <button class="btn positive" id="btnDone">Selesai</button>
    </div>
  </div>

<script>
/* Core interactions: load media, open panels, basic panel contents for several features */
const fileInput = document.getElementById('fileInput');
const mediaImg = document.getElementById('mediaPreview');
const mediaVideo = document.getElementById('mediaVideo');
const tools = document.querySelectorAll('.tool');
const panel = document.getElementById('panel');
const panelTitle = document.getElementById('panelTitle');
const panelBody = document.getElementById('panelBody');
const panelInfo = document.getElementById('panelInfo');
const btnCancel = document.getElementById('btnCancel');
const btnDone = document.getElementById('btnDone');

fileInput.addEventListener('change', e=>{
  const f = e.target.files[0];
  if(!f) return;
  const url = URL.createObjectURL(f);
  // clear
  mediaImg.style.display='none'; mediaVideo.style.display='none';
  const extension = f.type || '';
  if(extension.startsWith('video')){
    mediaVideo.src = url; mediaVideo.style.display='block'; mediaVideo.play().catch(()=>{});
  } else {
    mediaImg.src = url; mediaImg.style.display='block';
  }
});

/* show panel helper */
function openPanel(feature){
  panelTitle.textContent = feature;
  panelInfo.textContent = '';
  panelBody.innerHTML = '';
  // mark active tool
  document.querySelectorAll('.tool').forEach(t=>t.classList.toggle('active', t.dataset.feature===feature));
  // populate panel for specific features (some real, others placeholder)
  if(feature==='Rasio'){
    panelInfo.textContent = 'Ubah aspect ratio canvas';
    const opts = ['1:1','9:16','16:9','4:3','Free'];
    const wrap = document.createElement('div'); wrap.className='options';
    opts.forEach(o=>{
      const b = document.createElement('div'); b.className='pill'; b.textContent=o;
      b.onclick = ()=>{ applyRatio(o); };
      wrap.appendChild(b);
    });
    panelBody.appendChild(wrap);
  }
  else if(feature==='Trim'){
    panelInfo.textContent = 'Geser untuk menentukan start/end';
    const container = document.createElement('div');
    container.innerHTML = `
      <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
        <div style="flex:1"><input id="trimStart" type="range" min="0" max="100" value="10"></div>
        <div style="flex:1"><input id="trimEnd" type="range" min="0" max="100" value="90"></div>
      </div>
      <div class="small">Preview tombol Selesai untuk apply (simulated)</div>
    `;
    panelBody.appendChild(container);
  }
  else if(feature==='Speed'){
    panelInfo.textContent = 'Ubah kecepatan playback';
    const wrap = document.createElement('div'); wrap.className='options';
    ['0.5x','0.75x','1x','1.5x','2x'].forEach(s=>{
      const b = document.createElement('div'); b.className='pill'; b.textContent=s; b.onclick=()=>applySpeed(s); wrap.appendChild(b);
    });
    panelBody.appendChild(wrap);
  }
  else if(feature==='Volume'){
    panelInfo.textContent = 'Atur volume / fade';
    panelBody.innerHTML = `<div style="display:flex;align-items:center;gap:8px"><input id="volRange" type="range" min="0" max="100" value="100"></div><div class="small">Fade In / Out tersedia di implementasi selanjutnya</div>`;
    const vr = panelBody.querySelector('#volRange');
    vr.oninput = ()=>{ if(mediaVideo.style.display==='block') mediaVideo.volume = vr.value/100; };
  }
  else if(feature==='Crop'){
    panelInfo.textContent = 'Crop area (preview only)';
    panelBody.innerHTML = `<div class="small">Tool crop akan menampilkan crop box di canvas (prototype)</div>`;
    // simple demo: toggle a semi-transparent overlay showing crop box
    const btn = document.createElement('div'); btn.className='pill'; btn.textContent='Toggle Crop Box';
    btn.onclick = toggleCropBox;
    panelBody.appendChild(btn);
  }
  else if(feature==='Rotate'){
    panelInfo.textContent = 'Putar / flip';
    const wrap = document.createElement('div'); wrap.className='options';
    [['Rotate 90','rotate90'],['Rotate -90','rotate-90'],['Flip H','flipH']].forEach(x=>{
      const b = document.createElement('div'); b.className='pill'; b.textContent=x[0]; b.onclick=()=>applyRotate(x[1]); wrap.appendChild(b);
    });
    panelBody.appendChild(wrap);
  }
  else if(feature==='Replace'){
    panelInfo.textContent = 'Ganti media';
    const inp = document.createElement('input'); inp.type='file'; inp.accept='image/*,video/*';
    inp.onchange = e=>{ const f=e.target.files[0]; if(!f) return; const u=URL.createObjectURL(f); mediaImg.style.display='none'; mediaVideo.style.display='none'; if(f.type.startsWith('video')){ mediaVideo.src=u; mediaVideo.style.display='block'; mediaVideo.play().catch(()=>{});} else {mediaImg.src=u; mediaImg.style.display='block';} };
    panelBody.appendChild(inp);
  }
  else if(feature==='RemoveBG'){
    panelInfo.textContent='Remove background (simulated)';
    panelBody.innerHTML = '<div class="small">Fitur ini butuh backend/ML â€” placeholder saja</div>';
  }
  else if(feature==='Export'){
    panelInfo.textContent='Export (simulated)';
    panelBody.innerHTML = '<div class="small">Export akan dibuat di tahap selanjutnya (ffmpeg)</div>';
  }
  else {
    panelInfo.textContent = '';
    panelBody.innerHTML = `<div class="small">Placeholder options for ${feature}</div>`;
  }

  panel.classList.add('open');
  panel.setAttribute('aria-hidden','false');
}

/* small feature implementations (simulated) */
function applyRatio(r){
  const frame = document.querySelector('.canvas-frame');
  if(r==='1:1'){ frame.style.aspectRatio='1/1'; frame.style.height='auto'; frame.style.maxHeight='80vh'; }
  else if(r==='9:16'){ frame.style.aspectRatio='9/16'; frame.style.height='auto'; frame.style.maxHeight='90vh'; }
  else if(r==='16:9'){ frame.style.aspectRatio='16/9'; frame.style.height='auto'; frame.style.maxHeight='80vh'; }
  else if(r==='4:3'){ frame.style.aspectRatio='4/3'; frame.style.height='auto'; frame.style.maxHeight='80vh'; }
  else if(r==='Free'){ frame.style.aspectRatio='auto'; frame.style.height='100%'; frame.style.maxHeight='100%'; }
  // close panel to show result
  setTimeout(()=>{ closePanel(); }, 220);
}
function applySpeed(s){
  const v = parseFloat(s.replace('x',''))||1;
  if(mediaVideo.style.display==='block'){ mediaVideo.playbackRate = v; }
  closePanel();
}
function applyRotate(mode){
  if(mediaVideo.style.display==='block'){ if(mode==='rotate90') mediaVideo.style.transform='rotate(90deg)'; else if(mode==='rotate-90') mediaVideo.style.transform='rotate(-90deg)'; else if(mode==='flipH') mediaVideo.style.transform='scaleX(-1)'; }
  if(mediaImg.style.display==='block'){ if(mode==='rotate90') mediaImg.style.transform='rotate(90deg)'; else if(mode==='rotate-90') mediaImg.style.transform='rotate(-90deg)'; else if(mode==='flipH') mediaImg.style.transform='scaleX(-1)'; }
  closePanel();
}

/* crop box demo */
let cropBox = null;
function toggleCropBox(){
  const frame = document.querySelector('.canvas-frame');
  if(cropBox){ cropBox.remove(); cropBox=null; return; }
  cropBox = document.createElement('div');
  cropBox.style.position='absolute'; cropBox.style.border='2px dashed rgba(255,255,255,0.6)'; cropBox.style.left='12%'; cropBox.style.top='12%'; cropBox.style.width='76%'; cropBox.style.height='76%'; cropBox.style.pointerEvents='none';
  frame.appendChild(cropBox);
}

/* panel close */
function closePanel(){ panel.classList.remove('open'); panel.setAttribute('aria-hidden','true'); document.querySelectorAll('.tool').forEach(t=>t.classList.remove('active')); }

/* wire up toolbar clicks */
document.getElementById('tools').addEventListener('click', e=>{
  const el = e.target.closest('.tool');
  if(!el) return;
  const feature = el.dataset.feature;
  openPanel(feature);
});

/* cancel/done */
btnCancel.onclick = closePanel;
btnDone.onclick = ()=>{ /* Here we would apply changes â€” currently simulated */ closePanel(); };

/* convenience: open file dialog when clicking upload overlay */
document.querySelector('.upload-overlay').addEventListener('click', ()=>fileInput.click());

/* helper used above */
function closePanelImmediate(){ panel.classList.remove('open'); panel.setAttribute('aria-hidden','true'); }

/* small utility for demo view to close panel when clicking outside */
window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanel(); });

</script>
</body>
      </html>
