<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DESERT Splashscreen</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: black;
      font-family: Arial, sans-serif;
      color: white;
    }
    #splash, #dashboard {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
    }
    #dashboard {
      display: none;
      background: linear-gradient(135deg, #222, #444);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 2s ease-in-out;
    }
    #dashboard.show {
      opacity: 1;
    }
    #dashboard h1 {
      font-size: 3em;
      margin-bottom: 10px;
    }
    #dashboard p {
      font-size: 1.2em;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <!-- Splashscreen -->
  <div id="splash">
    <canvas id="splashCanvas"></canvas>
  </div>

  <!-- Dashboard -->
  <div id="dashboard">
    <h1>Welcome to Dashboard</h1>
    <p>Konten utama bisa ditaruh di sini üöÄ</p>
  </div>

  <!-- üéµ Sound effect -->
  <audio id="splashSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_3e1f3f4a54.mp3?filename=whoosh-6316.mp3"></audio>

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/loaders/FontLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/geometries/TextGeometry.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/objects/Lensflare.js"></script>

  <script>
    const splash = document.getElementById("splash");
    const dashboard = document.getElementById("dashboard");
    const splashSound = document.getElementById("splashSound");

    // Three.js setup
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 12;

    const renderer = new THREE.WebGLRenderer({canvas: document.getElementById("splashCanvas"), alpha:true});
    renderer.setSize(window.innerWidth, window.innerHeight);

    // Lighting
    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(5,5,5);
    scene.add(light);
    scene.add(new THREE.AmbientLight(0xffffff, 0.4));

    let textMesh, fadeOut = false;

    // üå™Ô∏è Sandstorm particles
    const particleCount = 2500;
    const particlesGeometry = new THREE.BufferGeometry();
    const positions = [];
    for (let i=0; i<particleCount; i++) {
      positions.push((Math.random()-0.5) * 60); // x
      positions.push((Math.random()-0.5) * 30); // y
      positions.push((Math.random()-0.5) * 60); // z
    }
    particlesGeometry.setAttribute("position", new THREE.Float32BufferAttribute(positions, 3));
    const particlesMaterial = new THREE.PointsMaterial({
      color: 0xe0c073,
      size: 0.12,
      transparent: true,
      opacity: 0.7
    });
    const particleSystem = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particleSystem);

    // üåû Sunlight + Lens Flare
    const textureLoader = new THREE.TextureLoader();
    const flareTexture = textureLoader.load("https://threejs.org/examples/textures/lensflare/lensflare0.png");
    const flareColor = new THREE.Color(0xffdd88);
    const lensflare = new THREE.Lensflare();
    lensflare.addElement(new THREE.LensflareElement(flareTexture, 400, 0, flareColor));
    light.add(lensflare);

    // Load font & create text
    const loader = new THREE.FontLoader();
    loader.load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json", font => {
      const textGeo = new THREE.TextGeometry("DESERT", {
        font: font,
        size: 2.3,
        height: 0.6,
        bevelEnabled: true,
        bevelThickness: 0.1,
        bevelSize: 0.05,
        bevelSegments: 5
      });

      const textMat = new THREE.MeshStandardMaterial({
        color: 0xe0c073,
        metalness: 0.3,
        roughness: 0.4,
        transparent: true,
        opacity: 1.0
      });

      textMesh = new THREE.Mesh(textGeo, textMat);
      textGeo.computeBoundingBox();
      const centerOffset = -0.5 * (textGeo.boundingBox.max.x - textGeo.boundingBox.min.x);
      textMesh.position.x = centerOffset;
      textMesh.scale.set(0.01,0.01,0.01);
      scene.add(textMesh);

      // üéµ mainkan sound effect
      splashSound.play();

      // Mulai fade out setelah 5 detik
      setTimeout(()=>{ fadeOut = true; }, 5000);
    });

    function animate() {
      requestAnimationFrame(animate);

      if (textMesh) {
        // Scale in
        if (textMesh.scale.x < 1 && !fadeOut) {
          textMesh.scale.lerp(new THREE.Vector3(1,1,1),0.05);
        }
        textMesh.rotation.y += 0.01;

        // Fade out
        if (fadeOut) {
          textMesh.material.opacity -= 0.01;
          if (textMesh.material.opacity <= 0) {
            textMesh.material.opacity = 0;
            splash.style.display = "none";
            dashboard.style.display = "flex";
            setTimeout(()=>dashboard.classList.add("show"),50);
          }
        }
      }

      // üå™Ô∏è Animate sandstorm
      const positions = particleSystem.geometry.attributes.position.array;
      for (let i=0; i<positions.length; i+=3) {
        positions[i] += 0.05; // move x
        if (positions[i] > 30) positions[i] = -30; // reset
      }
      particleSystem.geometry.attributes.position.needsUpdate = true;

      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener("resize", ()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
